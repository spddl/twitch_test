{"version":3,"sources":["TwitchGlitchWhite.svg","../node_modules/better-queue/lib sync /^better/-queue/-.*$","components/cache.js","helper/formatEmotes.js","helper/getRandomColor.js","components/chatLine.js","helper/FormatDate.js","redux/filter.js","redux/index.js","components/Log.js","components/Settings.js","components/TopBar.js","helper/parseBadges.js","data/badges.js","data/twitch.js","index.js"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","cache","CellMeasurerCache","minHeight","defaultHeight","fixedWidth","keyMapper","rowIndex","refreshCache","rowHeight","_minHeight","_defaultHeight","clearAll","splitWords","RegExp","msg","emotes","emotesArray","measure","bttvEmotes","twitchEmotes","ffzEmotes","chan","bttvObj","ffzObj","word","exec","globalbttv","has","push","badge","get","name","start","index","end","length","globalffz","i","split","empty","Array","apply","map","slice","concat","splice","key","onLoad","className","title","alt","src","srcSet","urls","randomcolor","Math","floor","random","color","ACTION","App","props","source","tags","timestamp","toLowerCase","indexOf","styleColor","found","banDuration","textDecorationLine","textDecorationStyle","textDecorationColor","banReason","formatEmotes","getRandomColor","banText","this","banMsg","style","fontWeight","Component","zeroPad2","num","zeroPad3","_FormatDate","Datenow","mobile","date","Date","HH","getHours","mm","getMinutes","ss","getSeconds","SSS","getMilliseconds","DD","getDate","MM","getMonth","YYYY","getFullYear","FormatDate","cacheInput","cacheOutput","result","_memoizedFormatDate","debug","timer","Filter","allLogs","filter","console","log","undefined","find","value","logs","size","scrollBottom","time","CHANNEL","NAME","MSG","item","timeEnd","update","type","initialState","List","Map","channel","settings","JSON","parse","localStorage","getItem","modalShow","twitchBadges","bttvBadges","fontClass","fontSize","maxLines","channelColor","channels","badges","global","store","createStore","state","action","ChannelColorList","len","found_","findIndex","line","targetMsgId","temp","set","Object","assign","forEach","username","ele","setItem","stringify","toArray","foundNewChannel","roomId","FILTER","Number","_10percent","_maxLines","takeLast","newColor","isNaN","toObject","window","__REDUX_DEVTOOLS_EXTENSION__","getBrowserHiddenProps","hidden","visibilityChange","document","msHidden","webkitHidden","LogContainer","handleResize","innerWidth","setState","bindListRef","current","forceUpdateGrid","listenScrollEvent","scrollHeight","scrollTop","clientHeight","UserNameRenderer","row","onClick","updateFilter","decamelize","text","replace","createBadge","versions","subscriber","bits","aria-label","image_url_1x","image_url_2x","image_url_4x","error","warn","createBadgeTags","hasOwnProperty","element","React","createRef","bind","addEventListener","_debounce","removeResizeListener","prevProps","_prevState","_snapshot","scrollToRow","_scrollingToRow","userInput","scrollButton","Button","variant","height","fontFamily","width","overscanColumnCount","overscanRowCount","scrollingResetTimeInterval","ref","rowCount","deferredMeasurementCache","onScroll","noRowsRenderer","rowRenderer","_key","parent","channelStyle","backgroundColor","columnIndex","padding","wordWrap","lineHeight","PureComponent","connect","SettingsModal","context","handleShow","handleClose","handleChange","restart","addChannel","target","InputGroup","Prepend","Text","FormControl","defaultValue","onChange","Append","role","Modal","show","onHide","scrollable","Header","closeButton","Title","Body","Collapse","in","location","reload","Alert","Form","Group","as","Row","Label","column","sm","Col","Control","placeholder","min","max","md","lg","Check","inline","custom","label","defaultChecked","checked","aria-describedby","onKeyPress","event","Footer","history","createBrowserHistory","configureUrlQuery","addChangeHandlers","urlPropsQueryConfig","QueryChannel","UrlQueryParamTypes","string","queryParam","QueryName","QueryMsg","TopBar","updateDebounceFilter","fn","delay","args","arguments","clearTimeout","setTimeout","debounce","onWheelHandler","onTouchMoveHandler","onTouchStartHandler","onChangeQueryChannel","onChangeQueryName","onChangeQueryMsg","up","ChannelArray","nextIndex","AppArray","deltaY","updateFilterNext","touches","touchReset","pageY","touchY","t","appStyle","Badge","margin","touchAction","onWheel","onTouchMove","onTouchStart","Navbar","bg","collapseOnSelect","Brand","require","marginRight","ButtonToolbar","onSubmit","preventDefault","refs","search","marginBottom","Settings","enhance","compose","addUrlProps","tempChannels","chat","TwitchJs","token","joinTimeout","level","_readyState","StoreChannel","ChannelState","_channelState","substr","_joins","difference","_join","join","then","data","roomState","_parts","_part","a","_","catch","err","on","command","message","_raw","badges_","reduce","parsed","rawKey","raw","systemMsg","fetch","res","status","statusText","json","badge_sets","resEmotes","sets","default_sets","emoticons","room","ReactDOM","render","Log","getElementById"],"mappings":"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","file":"static/js/main.07bb77dd.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/TwitchGlitchWhite.5f80eca1.svg\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 401;","import { CellMeasurerCache } from 'react-virtualized'\r\n\r\nexport const cache = new CellMeasurerCache({ // https://github.com/bvaughn/react-virtualized/blob/master/docs/CellMeasurer.md#cellmeasurercache\r\n  minHeight: 19,\r\n  defaultHeight: 19,\r\n  fixedWidth: true,\r\n  keyMapper: rowIndex => rowIndex\r\n})\r\n\r\nexport const refreshCache = function (rowHeight = 19) {\r\n  // console.log('refreshCache()')\r\n  // console.trace()\r\n\r\n  cache._minHeight = rowHeight\r\n  cache._defaultHeight = rowHeight\r\n  cache.clearAll()\r\n}\r\n","import React from 'react'\r\n\r\nconst splitWords = RegExp(/\\w+/, 'g')\r\n\r\nexport default ({ msg, emotes, emotesArray, measure, id, twitchEmotes, bttvEmotes, ffzEmotes, chan }) => {\r\n  const bttvObj = []\r\n  const ffzObj = []\r\n  if (bttvEmotes || ffzEmotes) {\r\n    let word\r\n    while ((word = splitWords.exec(msg)) !== null) {\r\n      if (bttvEmotes) {\r\n        if (emotes && emotes.globalbttv && emotes.globalbttv.has(word[0])) {\r\n          bttvObj.push({\r\n            badge: emotes.globalbttv.get(word[0]),\r\n            name: word[0],\r\n            start: word.index,\r\n            end: word.index + word[0].length\r\n          })\r\n        } else if (emotes && emotes[`${chan}-bttv`] && emotes[`${chan}-bttv`].has(word[0])) {\r\n          bttvObj.push({\r\n            badge: emotes[`${chan}-bttv`].get(word[0]),\r\n            name: word[0],\r\n            start: word.index,\r\n            end: word.index + word[0].length\r\n          })\r\n        }\r\n      }\r\n\r\n      if (ffzEmotes) {\r\n        if (emotes && emotes.globalffz && emotes.globalffz.has(word[0])) {\r\n          ffzObj.push({\r\n            badge: emotes.globalffz.get(word[0]),\r\n            name: word[0],\r\n            start: word.index,\r\n            end: word.index + word[0].length\r\n          })\r\n        } else if (emotes && emotes[`${chan}-ffz`] && emotes[`${chan}-ffz`].has(word[0])) {\r\n          ffzObj.push({\r\n            badge: emotes[`${chan}-ffz`].get(word[0]),\r\n            name: word[0],\r\n            start: word.index,\r\n            end: word.index + word[0].length\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // if (!(emotes.length || bttvObj.length || ffzObj.length)) {\r\n  //   return msg\r\n  // }\r\n\r\n  if (emotesArray.length === 0 && bttvObj.length === 0 && ffzObj.length === 0) {\r\n    return msg\r\n  }\r\n\r\n  // if (emotes.length === 0 && bttvObj.length === 0) {\r\n  //   return msg\r\n  // }\r\n\r\n  // if (emotes.length === 0) {\r\n  //   return msg\r\n  // }\r\n\r\n  // msg = msgBttvEmote\r\n  // console.log(msgBttvEmote)\r\n\r\n  // msg = emotes.map((emote, i) => {\r\n  //   const img = <img\r\n  //     key={`${id}-${emote.id}-${i}`}\r\n  //     // onLoad={measure}\r\n  //     className='emoticon'\r\n  //     alt={emote.id}\r\n  //     src={'//static-cdn.jtvnw.net/emoticons/v1/' + emote.id + '/1.0'}\r\n  //     srcSet={`//static-cdn.jtvnw.net/emoticons/v1/${emote.id}/2 2x, //static-cdn.jtvnw.net/emoticons/v1/${emote.id}/4 4x`}\r\n  //   />\r\n  //   const start = emote.start\r\n  //   const ende = emote.end + 1\r\n  //   const left = msg.slice(0, start)\r\n  //   const right = msg.slice(ende)\r\n  //   return (<span key={`${emote.id}-${i}`}>{left.concat(img, right)}</span>)\r\n  // })\r\n  // chatLine.js: 25 emotes: 0.002685546875ms\r\n  // chatLine.js: 25 emotes: 0.00390625ms\r\n  // chatLine.js: 25 emotes: 0.004150390625ms\r\n  // chatLine.js: 25 emotes: 0.003173828125ms\r\n  // chatLine.js: 25 emotes: 0.057861328125ms\r\n  // chatLine.js: 25 emotes: 0.004150390625ms\r\n  // chatLine.js: 25 emotes: 0.0029296875ms\r\n  // chatLine.js: 25 emotes: 0.003173828125ms\r\n  // chatLine.js: 25 emotes: 0.03515625ms\r\n\r\n  // // // // // // // // // // // // // // // // // //\r\n\r\n  // for (let i = emotes.length; i--;) {\r\n  //   msg.splice(\r\n  //     emotes[i].start,\r\n  //     emotes[i].end + 1,\r\n  //     <img\r\n  //       key={`${id}-${emotes[i].id}-${i}`}\r\n  //       // onLoad={measure}\r\n  //       className='emoticon'\r\n  //       alt={emotes[i].id}\r\n  //       src={'//static-cdn.jtvnw.net/emoticons/v1/' + emotes[i].id + '/1.0'}\r\n  //       srcSet={`//static-cdn.jtvnw.net/emoticons/v1/${emotes[i].id}/2 2x, //static-cdn.jtvnw.net/emoticons/v1/${emotes[i].id}/4 4x`}\r\n  //     />\r\n  //   )\r\n  // }\r\n  // chatLine.js: 25 emotes: 0.003173828125ms\r\n  // chatLine.js: 25 emotes: 0.027099609375ms\r\n  // chatLine.js: 25 emotes: 0.00390625ms\r\n  // chatLine.js: 25 emotes: 0.004150390625ms\r\n  // chatLine.js: 25 emotes: 0.00390625ms\r\n  // chatLine.js: 25 emotes: 0.0029296875ms\r\n  // chatLine.js: 25 emotes: 0.003173828125ms\r\n  // chatLine.js: 25 emotes: 0.002685546875ms\r\n  // chatLine.js: 25 emotes: 0.004150390625ms\r\n  // chatLine.js: 25 emotes: 0.029052734375ms\r\n  // chatLine.js: 25 emotes: 0.0029296875ms\r\n\r\n  // // // // // // // // // // // // // // // // // //\r\n\r\n  msg = msg.split('')\r\n\r\n  for (const i in emotesArray) { // https://github.com/tmijs/tmi.js/issues/11\r\n    const e = emotesArray[i]\r\n    const length = e.end - e.start\r\n    const empty = Array.apply(null, new Array(length + 1)).map(function () { return '' })\r\n    msg = msg.slice(0, e.start).concat(empty).concat(msg.slice(e.end + 1, msg.length))\r\n    msg.splice(e.start, 1, <img\r\n      key={`${id}-${e.id}-${i}`}\r\n      onLoad={measure}\r\n      className='emoticon'\r\n      title={'Twitch Emoticon'}\r\n      alt={e.id}\r\n      src={`//static-cdn.jtvnw.net/emoticons/v1/${e.id}/1.0`}\r\n      srcSet={`//static-cdn.jtvnw.net/emoticons/v1/${e.id}/2.0 2x, //static-cdn.jtvnw.net/emoticons/v1/${e.id}/4.0 4x`}\r\n    />)\r\n  }\r\n\r\n  if (bttvEmotes) {\r\n    for (const i in bttvObj) { // https://github.com/tmijs/tmi.js/issues/11\r\n      const e = bttvObj[i]\r\n      const length = e.end - e.start\r\n      const empty = Array.apply(null, new Array(length + 1)).map(function () { return '' })\r\n      msg = msg.slice(0, e.start).concat(empty).concat(msg.slice(e.end + 1, msg.length))\r\n      msg.splice(e.start, 1,\r\n        <img\r\n          key={`${e.badge.code}-${e.badge.id}-${i}`}\r\n          onLoad={measure}\r\n          className='emoticon'\r\n          title={'BTTV: ' + e.name}\r\n          alt={e.badge.code}\r\n          src={`//cdn.betterttv.net/emote/${e.badge.id}/1x`}\r\n          srcSet={`//cdn.betterttv.net/emote/${e.badge.id}/2x 2x, //cdn.betterttv.net/emote/${e.badge.id}/3x 3x`}\r\n        />)\r\n    }\r\n  }\r\n\r\n  if (ffzEmotes) {\r\n    for (const i in ffzObj) { // https://github.com/tmijs/tmi.js/issues/11\r\n      const e = ffzObj[i]\r\n      const length = e.end - e.start\r\n      const empty = Array.apply(null, new Array(length + 1)).map(function () { return '' })\r\n      msg = msg.slice(0, e.start).concat(empty).concat(msg.slice(e.end + 1, msg.length))\r\n      msg.splice(e.start, 1,\r\n        <img\r\n          key={`${e.badge.name}-${e.badge.id}-${i}`}\r\n          onLoad={measure}\r\n          className='emoticon'\r\n          title={'FFZ: ' + e.badge.name}\r\n          alt={e.badge.name}\r\n          src={`${e.badge.urls[1]}`}\r\n          srcSet={`${e.badge.urls[2]} 2x, ${e.badge.urls[4]} 4x`}\r\n        />)\r\n    }\r\n  }\r\n  // chatLine.js: 25 emotes: 0.003173828125ms\r\n  // chatLine.js: 25 emotes: 0.051025390625ms\r\n  // chatLine.js: 25 emotes: 0.003173828125ms\r\n  // chatLine.js: 25 emotes: 0.049072265625ms\r\n  // chatLine.js: 25 emotes: 0.004150390625ms\r\n  // chatLine.js: 25 emotes: 0.071044921875ms\r\n  // chatLine.js: 25 emotes: 0.004150390625ms\r\n  // chatLine.js: 25 emotes: 0.054931640625ms\r\n  // chatLine.js: 25 emotes: 0.002685546875ms\r\n  // chatLine.js: 25 emotes: 0.004150390625ms\r\n\r\n  return msg\r\n}\r\n","let randomcolor = ['#fc5c65', '#fd9644', '#fed330', '#26de81', '#2bcbba', '#eb3b5a', '#fa8231', '#f7b731', '#20bf6b', '#0fb9b1', '#45aaf2', '#4b7bec', '#a55eea', '#d1d8e0', '#778ca3', '#2d98da', '#3867d6', '#8854d0', '#a5b1c2', '#4b6584'] // https://flatuicolors.com/\r\n\r\nexport default () => {\r\n  const index = Math.floor(Math.random() * randomcolor.length)\r\n  const color = randomcolor[index]\r\n  randomcolor.splice(index, 1)\r\n  if (!randomcolor.length) {\r\n    randomcolor = ['#fc5c65', '#fd9644', '#fed330', '#26de81', '#2bcbba', '#eb3b5a', '#fa8231', '#f7b731', '#20bf6b', '#0fb9b1', '#45aaf2', '#4b7bec', '#a55eea', '#d1d8e0', '#778ca3', '#2d98da', '#3867d6', '#8854d0', '#a5b1c2', '#4b6584']\r\n  }\r\n  return color\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nimport formatEmotes from '../helper/formatEmotes'\r\nimport getRandomColor from '../helper/getRandomColor'\r\n\r\n// eslint-disable-next-line no-control-regex\r\nconst ACTION = /(\\x01ACTION )(.*)(\\x01)/\r\n\r\nclass App extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.emotes = props.emotes\r\n    this.twitchEmotes = props.twitchEmotes\r\n    this.bttvEmotes = props.bttvEmotes\r\n    this.ffzEmotes = props.ffzEmotes\r\n\r\n    this.chan = props.source.chan\r\n    this.msg = props.source.msg\r\n    this.name = props.source.name\r\n    this.tags = props.source.tags\r\n    this.timestamp = props.source.timestamp\r\n\r\n    if (this.msg && this.msg.toLowerCase().indexOf('@' + this.chan) !== -1) {\r\n      this.styleColor = { color: 'red' }\r\n    }\r\n\r\n    const found = ACTION.exec(this.msg)\r\n    if (found !== null) {\r\n      this.msg = found[2]\r\n      this.styleColor = { color: this.tags.color }\r\n    }\r\n\r\n    if (this.tags && this.tags.banDuration) { // ban-duration (Optional) Duration of the timeout, in seconds. If omitted, the ban is permanent.\r\n      this.styleColor = {\r\n        textDecorationLine: 'line-through',\r\n        textDecorationStyle: 'wavy',\r\n        textDecorationColor: 'rgba(255, 193, 7, 0.8)'\r\n      }\r\n    } else if (this.tags && this.tags.banReason) {\r\n      this.styleColor = {\r\n        textDecorationLine: 'line-through',\r\n        textDecorationStyle: 'wavy',\r\n        textDecorationColor: 'rgba(255, 0, 0, 0.8)'\r\n      }\r\n    }\r\n\r\n    if (this.tags && this.tags.emotes) {\r\n      this.msg = formatEmotes({\r\n        msg: this.msg,\r\n        measure: props.measure,\r\n        id: this.tags.id,\r\n        emotesArray: this.tags.emotes,\r\n        emotes: this.emotes,\r\n        twitchEmotes: this.twitchEmotes,\r\n        bttvEmotes: this.bttvEmotes,\r\n        ffzEmotes: this.ffzEmotes,\r\n        chan: this.chan\r\n      })\r\n    }\r\n\r\n    if (this.tags && this.tags.color === true) {\r\n      this.tags.color = getRandomColor()\r\n    }\r\n  }\r\n\r\n  render () {\r\n    let banText\r\n    if (this.tags && this.tags.banMsg) {\r\n      banText = <span style={{ fontWeight: 'bold' }} className='line_right'>{this.tags.banMsg}</span>\r\n    }\r\n\r\n    return (\r\n      <><span className='line_right' style={this.styleColor}>{this.msg}</span>{banText}</>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App\r\n","const zeroPad2 = (num) => num < 10 ? '0' + num : num\r\nconst zeroPad3 = (num) => {\r\n  if (num < 10) return '00' + num\r\n  else if (num < 100) return '0' + num\r\n  else return num\r\n}\r\nconst _FormatDate = (Datenow = 0, mobile = false) => {\r\n  const date = new Date(Datenow)\r\n\r\n  // 'HH:mm:ss.SSS'\r\n  const HH = zeroPad2(date.getHours())\r\n  const mm = zeroPad2(date.getMinutes())\r\n  const ss = zeroPad2(date.getSeconds())\r\n  const SSS = zeroPad3(date.getMilliseconds())\r\n\r\n  if (!mobile) {\r\n    // 'YYYY-MM-DD HH:mm:ss.SSS'\r\n    const DD = zeroPad2(date.getDate())\r\n    const MM = zeroPad2(date.getMonth())\r\n    const YYYY = date.getFullYear()\r\n    return `${YYYY}-${MM}-${DD} ${HH}:${mm}:${ss}.${SSS}`\r\n  }\r\n\r\n  return `${HH}:${mm}:${ss}.${SSS}`\r\n}\r\n\r\nconst _memoizedFormatDate = (Datenow = 0, mobile) => {\r\n  let cacheInput = 0\r\n  let cacheOutput = ''\r\n  return (Datenow, mobile) => {\r\n    if (cacheInput === Datenow) {\r\n      return cacheOutput\r\n    } else {\r\n      const result = _FormatDate(Datenow, mobile)\r\n      cacheInput = Datenow\r\n      cacheOutput = result\r\n      return result\r\n    }\r\n  }\r\n}\r\n\r\nconst FormatDate = _memoizedFormatDate()\r\nexport default FormatDate\r\n","const debug = false\r\nconst timer = false\r\n\r\nexport default function Filter (allLogs, filter) {\r\n  // if (debug) console.log('>>>> Filter', allLogs, filter)\r\n  if (debug) console.log(`::: Filter channel '${filter.get('channel')}', name '${filter.get('name')}', msg '${filter.get('msg')}'`)\r\n  // console.log(filter.find(value => value !== ''))\r\n\r\n  if (filter.find(value => value !== '') === undefined) {\r\n    if (debug) console.log('Filter return { logs: allLogs, length: allLogs.size }')\r\n    return { logs: allLogs, length: allLogs.size, scrollBottom: true }\r\n  }\r\n  if (timer) console.time('Filter')\r\n\r\n  const CHANNEL = filter.get('channel')\r\n  const NAME = filter.get('name')\r\n  const MSG = filter.get('msg').toLowerCase()\r\n\r\n  if (debug) console.log(`::: Filter channel '${CHANNEL}', name '${NAME}', msg '${MSG}'`)\r\n\r\n  const logs = allLogs.filter(item => {\r\n    // if (LEVEL && item.level !== LEVEL) { // genaue bereinstimmung\r\n    //   return false\r\n    // }\r\n\r\n    // if (LEVEL && item.level >= LEVEL) { // ab diesem Level\r\n    //   return false\r\n    // }\r\n\r\n    if (CHANNEL && item.chan !== CHANNEL) {\r\n      return false\r\n    }\r\n\r\n    if (NAME && item.name !== NAME) {\r\n      return false\r\n    }\r\n\r\n    if (MSG && item.msg.toLowerCase().indexOf(MSG) === -1) {\r\n      if (item.name && item.name.toLowerCase().indexOf(MSG) === -1) {\r\n        return false\r\n      } if (!item.name) {\r\n        return false // Alle Status Meldungen mssen auch weg\r\n      }\r\n    }\r\n\r\n    // if (MSG && item.msg.toLowerCase().indexOf(MSG) === -1) {\r\n    //   return false\r\n    // }\r\n\r\n    // if (MSG && item.name && item.name.indexOf(MSG) === -1) { // berprfe in der SearchBar die Nachricht und den Nickname\r\n    //   return false\r\n    // }\r\n\r\n    return true // true ist das Ergebnis\r\n  })\r\n  if (timer) console.timeEnd('Filter')\r\n  return { logs: logs, length: logs.size }\r\n}\r\n\r\n// export default function Filter (allLogs, filter) {\r\n//   if (debug) console.log('>>>> Filter', allLogs, filter)\r\n//   if (debug) console.log(`::: Filter name '${filter.get('name')}', level '${filter.get('level')}', hostname '${filter.get('hostname')}', msg '${filter.get('msg')}'`)\r\n\r\n//   if (filter.has('name') && filter.has('level') && filter.has('hostname') && filter.has('msg')) {\r\n//     if (debug) console.log('Filter return { logs: allLogs, length: allLogs.size }')\r\n//     return { logs: allLogs, length: allLogs.size, scrollBottom: true }\r\n//   }\r\n\r\n//   if (debug) console.time('Filter')\r\n//   let LEVEL\r\n//   if (filter.has('level')) {\r\n//     LEVEL = filter.get('level') + 1\r\n//   }\r\n\r\n//   const NAME = filter.get('name')\r\n//   const HOSTNAME = filter.get('hostname')\r\n//   const MSG = filter.get('msg').toLowerCase()\r\n\r\n//   if (debug) console.log(`::: Filter name '${NAME}', level '${LEVEL}', hostname '${HOSTNAME}', msg '${MSG}'`)\r\n//   const logs = allLogs.filter(item => {\r\n//     // if (filter.level && item.level !== filter.level) return false // genaue bereinstimmung\r\n\r\n//     if (LEVEL && item.level >= LEVEL) return false // ab diesem Level\r\n\r\n//     if (NAME && item.name !== NAME) return false\r\n\r\n//     if (HOSTNAME && item.hostname !== HOSTNAME) return false\r\n\r\n//     if (MSG && item.msg.toLowerCase().indexOf(MSG) === -1) return false\r\n\r\n//     return true\r\n//   })\r\n//   if (debug) console.timeEnd('Filter')\r\n//   return { logs: logs, length: logs.size }\r\n// }\r\n","/* globals localStorage:true */\n\nimport { createStore } from 'redux'\nimport { List, Map } from 'immutable' // https://immutable-js.github.io/immutable-js/\nimport Filter from './filter'\nimport { refreshCache } from '../components/cache'\n\nimport getRandomColor from '../helper/getRandomColor'\n\n// import parseBadges from '../helper/parseBadges'\n\nconst debug = false\nconst timer = false\n\nexport const update = function (value, type) {\n  if (debug) console.log('update()', { type, value })\n  return ({ type, value })\n}\n\n// let randomcolor = ['#fc5c65', '#fd9644', '#fed330', '#26de81', '#2bcbba', '#eb3b5a', '#fa8231', '#f7b731', '#20bf6b', '#0fb9b1', '#45aaf2', '#4b7bec', '#a55eea', '#d1d8e0', '#778ca3', '#2d98da', '#3867d6', '#8854d0', '#a5b1c2', '#4b6584'] // https://flatuicolors.com/\n// const getRandomColor = () => {\n//   const index = Math.floor(Math.random() * randomcolor.length)\n//   const color = randomcolor[index]\n//   randomcolor.splice(index, 1)\n//   if (!randomcolor.length) {\n//     randomcolor = ['#fc5c65', '#fd9644', '#fed330', '#26de81', '#2bcbba', '#eb3b5a', '#fa8231', '#f7b731', '#20bf6b', '#0fb9b1', '#45aaf2', '#4b7bec', '#a55eea', '#d1d8e0', '#778ca3', '#2d98da', '#3867d6', '#8854d0', '#a5b1c2', '#4b6584']\n//   }\n//   return color\n// }\n\n// https://github.com/koba04/redux-store-structure-patterns/blob/master/patterns/separated-list-store.ts?source=post_page---------------------------#L44\nconst LogReducer = (state = {}, action) => {\n  // console.log(action)\n\n  if (debug) console.log('Reducer action', action)\n  if (debug) console.log('Reducer OLDStore', state)\n\n  if (timer) console.time(action.type)\n  switch (action.type) { // Logs\n    case 'scrollBottom':\n      if (timer) console.timeEnd(action.type)\n      state = {\n        ...state,\n        scrollBottom: action.value\n      }\n      break\n    case 'ADD_DATA':\n      let ChannelColorList = state.settings.get('channelColor') || {}\n      // console.log(action.value)\n\n      for (let i = 0, len = action.value.length; i < len; i++) {\n        if (!ChannelColorList[action.value[i].chan]) ChannelColorList[action.value[i].chan] = getRandomColor()\n\n        // if (action.value[i] && action.value[i].tags && action.value[i].tags.badges) {\n        //   if (action.value[i].tags.badges !== {}) {\n        //     delete action.value[i].tags.badges\n        //     action.value[i].tags.badges = parseBadges(action.value[i].raw)\n        //   }\n        // }\n      }\n\n      // List\n      // const allLogs = state.allLogs.concat(action.value) // 2.008056640625ms\n      const allLogs = state.allLogs.push(...action.value) // 1.783935546875ms\n\n      // Seq\n      // const allLogs = state.allLogs.concat(action.value)\n\n      state.allLogs = allLogs\n      break\n\n    case 'REMOVE_DATA': // Es werden alle gefundenen gendert\n      // console.log('action.value', action.value)\n      // console.time('REMOVE_DATA')\n      const found_ = state.allLogs.findIndex(line => {\n        if (line && line.tags && line.tags.id && line.tags.id === action.value.tags.targetMsgId) {\n          return true\n        }\n        return false\n      })\n\n      if (found_ !== -1) {\n        const temp = state.allLogs.get(found_)\n        state.allLogs = state.allLogs.set(found_, Object.assign({}, temp, { tags: action.value.tags }))\n        console.log('REMOVE_DATA found_', found_, state.allLogs.get(found_))\n      }\n\n      // console.timeEnd('REMOVE_DATA')\n      break\n\n    case 'EDIT_DATA': // Es wird nur ein Eintrag gendert\n      // console.time('EDIT_DATA')\n      state.allLogs.forEach((item, index) => {\n        let i = -1\n        if (item.chan === action.value.chan && item.name === action.value.username) {\n          i = index\n        }\n        if (i !== -1) {\n          const temp = state.allLogs.get(i)\n          state.allLogs = state.allLogs.set(i, Object.assign({}, temp, { tags: action.value.tags }))\n        }\n        return true\n      })\n      // console.timeEnd('EDIT_DATA')\n      break\n\n    case 'ADD_ROOMID':\n      const found = state.channels.findIndex(ele => ele.name === action.value.name)\n      if (found !== -1) {\n        state.channels = state.channels.set(found, action.value)\n        action.value = state.channels\n      }\n      localStorage.setItem('channels', JSON.stringify(action.value.toArray()))\n      return {\n        ...state,\n        channels: action.value\n      }\n    case 'ADD_CHANNEL': // eslint-disable-line\n      const foundNewChannel = state.channels.find((value) => value.name === action.value.name)\n      if (!foundNewChannel) {\n        ChannelColorList = state.settings.get('channelColor') || {}\n        if (!(ChannelColorList && ChannelColorList[action.value.name])) ChannelColorList[action.value.name] = getRandomColor()\n        const channels = state.channels.push({ name: action.value.name, roomId: action.value.roomId }) /* roomId is undefined */\n        // localStorage.setItem('channels', JSON.stringify(action.value.toArray()))\n        return {\n          ...state,\n          channels: channels\n        }\n      } else {\n        break\n      }\n\n    case 'CHANNELS': // eslint-disable-line\n      // console.log('CHANNELS', action.value)\n      localStorage.setItem('channels', JSON.stringify(action.value.toArray()))\n      return {\n        ...state,\n        channels: action.value\n      }\n      // localStorage.setItem('channels', JSON.stringify(action.value.toArray()))\n\n      // // state.channels = action.value\n      // return {\n      //   ...state,\n      //   channels: action.value\n      // }\n      // break\n    case 'UPDATE_EMOTES':\n      // console.log('UPDATE_EMOTES', action, state.emotes)\n      state.emotes[action.value.key] = Map(action.value.value)\n      return {\n        ...state,\n        emotes: state.emotes\n      }\n\n    case 'UPDATE_BADGES':\n      // console.log('UPDATE_BADGES', action, state.badges)\n      state.badges[action.value.key] = Map(action.value.value)\n      return {\n        ...state,\n        badges: state.badges\n      }\n    default:\n  }\n\n  // Filter\n  switch (action.type) { // TODO scrollbottom\n    case 'ADD_FILTER_channel':\n      state.filter = state.filter.set('channel', action.value)\n      break\n    case 'ADD_FILTER_name':\n      state.filter = state.filter.set('name', action.value)\n      break\n    case 'ADD_FILTER_msg':\n      state.filter = state.filter.set('msg', action.value)\n      break\n\n    default:\n  }\n\n  switch (action.type) { // Filter bernehmen\n    case 'ADD_FILTER_name':\n    case 'ADD_FILTER_channel':\n    case 'ADD_FILTER_msg':\n    case 'scrollBottom':\n    case 'ADD_DATA':\n      // TODO: wenn 'state.scrollBottom' === false ist sollte er auch keine Zeilen lschen wenn das 'maxLines' erreicht ist\n      // wenn alle Filter === '' sind sollte er wieder nach unten scrollen\n      // man sollte die Filter benutzen knnen auch wenn nicht 'state.scrollBottom' === true ist\n      const FILTER = (action.type === 'ADD_FILTER_name' || action.type === 'ADD_FILTER_channel' || action.type === 'ADD_FILTER_msg')\n      if (state.scrollBottom || FILTER) {\n        let { logs, length, scrollBottom } = Filter(state.allLogs, state.filter)\n        const maxLines = Number(state.settings.get('maxLines'))\n\n        if (length > maxLines) { // https://github.com/spddl/react_logein/blob/master/src/store/index.js#L91\n          const _10percent = 10 * maxLines / 100\n          const _maxLines = maxLines - _10percent\n\n          state.allLogs = state.allLogs.takeLast(_maxLines)\n          logs = logs.takeLast(_maxLines)\n          length = _maxLines\n          refreshCache() // Damit der Index der Zeilen als Key fr den Cache verwendet werden kann\n        }\n\n        if (timer) console.timeEnd(action.type)\n        return {\n          ...state,\n          scrollBottom: scrollBottom || state.scrollBottom,\n          logs,\n          length\n        }\n      } else {\n        if (state.filter.find(value => value !== '') === undefined) { // Wenn kein Filter gesetzt ist\n          if (timer) console.timeEnd(action.type)\n          return { // nach unten scrollen\n            ...state,\n            // scrollBottom: true,\n            logs: state.allLogs,\n            length: state.allLogs.size\n          }\n        } else {\n          if (timer) console.timeEnd(action.type)\n          return { ...state } // 'FREEZE' Die Daten werden nicht gendert\n        }\n      }\n    default:\n  }\n\n  // Settings\n  switch (action.type) {\n    case 'channelColor':\n      const newColor = action.value\n      action.value = {\n        ...state.settings.get(action.type),\n        ...newColor\n      }\n    case 'modalShow': // eslint-disable-line\n    case 'twitchBadges':\n    case 'bttvBadges':\n    case 'twitchEmotes':\n    case 'bttvEmotes':\n    case 'ffzEmotes':\n    case 'fontClass':\n    case 'fontSize':\n    case 'rowHeight':\n    case 'appShow':\n    case 'hostnameShow':\n    case 'maxLines':\n      if (isNaN(!action.value)) action.value = Number(action.value)\n      const settings = state.settings.set(action.type, action.value)\n      state = {\n        ...state,\n        settings\n      }\n      localStorage.setItem('settings', JSON.stringify(settings.toObject()))\n      break\n    default:\n  }\n\n  if (timer) console.timeEnd(action.type)\n  if (debug) console.log('Reducer NEWStore', state)\n  return state\n}\n\nconst initialState = {\n  allLogs: List(), // https://immutable-js.github.io/immutable-js/docs/#/List\n  logs: List(),\n  length: 0,\n  scrollBottom: true,\n  filter: Map({\n    name: '',\n    msg: '',\n    channel: ''\n  }),\n  // settings: Map({ // https://immutable-js.github.io/immutable-js/docs/#/Map\n  settings: Map(JSON.parse(localStorage.getItem('settings')) || {\n    modalShow: false, // true,\n\n    twitchBadges: true,\n    bttvBadges: true,\n\n    twitchEmotes: true,\n    bttvEmotes: true,\n    ffzEmotes: true,\n\n    fontClass: 'inconsolata-font',\n    fontSize: 13,\n    rowHeight: 19,\n    maxLines: 50000,\n    channelColor: {}\n  }),\n  channels: List(JSON.parse(localStorage.getItem('channels')) || []),\n  badges: {\n    global: Map()\n  },\n  emotes: {\n    global: Map()\n  }\n}\n\nexport const store = createStore(\n  LogReducer,\n  initialState,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n// process.env.NODE_ENV !== 'production' && window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n","import React, { PureComponent } from 'react'\r\n\r\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer'\r\nimport List from 'react-virtualized/dist/commonjs/List'\r\nimport CellMeasurer from 'react-virtualized/dist/commonjs/CellMeasurer'\r\n\r\nimport { cache, refreshCache } from './cache'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\n\r\nimport '../TableStyles.css'\r\nimport _debounce from 'lodash.debounce'\r\n\r\n// import anchorme from 'anchorme'\r\n\r\nimport ChatLine from './chatLine'\r\n\r\nimport FormatDate from '../helper/FormatDate'\r\n// import formatEmotes from '../helper/formatEmotes'\r\n// import getRandomColor from '../helper/getRandomColor'\r\n// import classifierNumber from '../helper/classifierNumber'\r\n// import LevelColor from '../helper/colors'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { update } from '../redux'\r\n\r\nconst debug = false\r\n\r\n// Limitations and Performance Considerations // https://github.com/bvaughn/react-virtualized/blob/a41ff4857ea08c604db3a64f556ff08135cfbfcc/docs/CellMeasurer.md\r\n// Performance\r\n// Measuring a column's width requires measuring all rows in order to determine the widest occurrence of that column. The same is true in reverse for measuring \r\n// a row's height.For this reason it may not be a good idea to use this HOC for Grids containing a large number of both columns and cells.\r\n\r\n// Since this component measures one cell at a time to determine it's width/height, it will likely be slow if a user skips many rows (or columns) at once \r\n// by scrolling with a scrollbar or via a scroll-to-cell prop. There is (unfortunately) no workaround for this performance limitation at the moment.\r\n\r\nconst getBrowserHiddenProps = () => {\r\n  let hidden, visibilityChange\r\n  if (typeof document.hidden !== 'undefined') {\r\n    hidden = 'hidden'\r\n    visibilityChange = 'visibilitychange'\r\n  } else if (typeof document.msHidden !== 'undefined') {\r\n    hidden = 'msHidden'\r\n    visibilityChange = 'msvisibilitychange'\r\n  } else if (typeof document.webkitHidden !== 'undefined') {\r\n    hidden = 'webkitHidden'\r\n    visibilityChange = 'webkitvisibilitychange'\r\n  }\r\n\r\n  return {\r\n    hidden,\r\n    visibilityChange\r\n  }\r\n}\r\n\r\nclass LogContainer extends PureComponent {\r\n  constructor(props) {\r\n    super(props)\r\n    if (debug) console.log('LogContainer constructor', props)\r\n    \r\n\r\n    this.bindListRef = React.createRef()\r\n\r\n    this.state = {\r\n      mobile: window.innerWidth < 640,\r\n      scrollBottom: true\r\n    }\r\n\r\n    this.updateFilter = this.updateFilter.bind(this)\r\n\r\n    const { hidden, visibilityChange } = getBrowserHiddenProps() // https://dev.to/hurricaneinteractive/guilt-users-into-coming-back-with-your-document-title-55kn\r\n\r\n    if (typeof document.addEventListener !== 'undefined' && typeof hidden !== 'undefined') {\r\n      document.addEventListener(visibilityChange, () => {\r\n        if (!document[hidden]) {\r\n          refreshCache()\r\n          // if (this.bindListRef.current) {\r\n          //   this.bindListRef.current.forceUpdateGrid()\r\n          // }\r\n        }\r\n      }, false)\r\n    }\r\n  }\r\n\r\n  // bindListRef = ref => { this.list = ref } // eslint-disable-line\r\n\r\n  componentDidMount() {\r\n    if (debug) console.log('componentDidMount()')\r\n    if (this.bindListRef.current) {\r\n      this.bindListRef.current.forceUpdateGrid()\r\n    }\r\n    window.addEventListener('resize', _debounce(() => this.handleResize(window.innerWidth), 100))\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    try {\r\n      window.removeResizeListener('resize', _debounce(() => this.handleResize(window.innerWidth), 100))\r\n    } catch (error) { }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, _prevState, _snapshot) { // https://stackoverflow.com/a/51770376\r\n    if (debug) console.log('componentDidUpdate()')\r\n    // if (debug) console.log(`${this.state.scrollBottom} && ${this.props.length} !== ${prevProps.length}`)\r\n\r\n    if (this.props.length !== prevProps.length) {\r\n      if (this.props.scrollBottom) { // if (this.state.scrollBottom) {\r\n        const length = this.props.length\r\n        this.bindListRef.current.scrollToRow(length)\r\n        // if (debug) console.log(`1-this.bindListRef.current.scrollToRow(${length})`)\r\n        this.setState({ _scrollingToRow: length }, () => {\r\n          this.bindListRef.current.scrollToRow(length)\r\n          // if (debug) console.log(`2-this.bindListRef.current.scrollToRow(${length})`)\r\n        })\r\n      }\r\n\r\n      if (this.props.filter !== prevProps.filter) {\r\n        refreshCache() // jedes mal wenn ein Filter gendert wird\r\n        // fr mehr performance bruchte man eine UUID\r\n      }\r\n    }\r\n  }\r\n\r\n  handleResize = (innerWidth) => {\r\n    if (debug) console.log('handleResize()')\r\n    if (innerWidth < 640) this.setState({ mobile: true })\r\n    else this.setState({ mobile: false })\r\n\r\n    refreshCache()\r\n    if (this.bindListRef.current) {\r\n      this.bindListRef.current.forceUpdateGrid()\r\n    }\r\n  }\r\n\r\n  listenScrollEvent = ({ scrollHeight, scrollTop, clientHeight }) => {\r\n    if (debug) console.log(`listenScrollEvent() if ((${scrollHeight} - ${scrollTop}) === ${clientHeight})`)\r\n    if (scrollHeight === 0 && scrollTop === 0) return\r\n\r\n    if ((scrollHeight - scrollTop) === clientHeight) {\r\n      if (!this.props.scrollBottom) this.props.update(true, 'scrollBottom')\r\n    } else {\r\n      if (this.props.scrollBottom) this.props.update(false, 'scrollBottom')\r\n    }\r\n  }\r\n\r\n  updateFilter(userInput, type) {\r\n    if (debug) console.log('updateFilter()', userInput, type)\r\n    if (this.props.filter[type] === userInput) userInput = ''\r\n    this.props.update(userInput, 'ADD_FILTER_' + type)\r\n  }\r\n\r\n  classifierLevel(row) {\r\n    // const { result, classcolor } = helper.classifierLevel(cellData)\r\n    return <span onClick={() => this.updateFilter(row.chan, 'channel')}>{row.chan}</span>\r\n  }\r\n\r\n  UserNameRenderer = (row) => {\r\n    return <span className='username line_right' onClick={() => this.updateFilter(row.name, 'name')} style={{ color: (row && row.tags && row.tags.color ? row.tags.color : '#EEE') }}>{row.name}</span>\r\n  }\r\n\r\n  decamelize = (text) => {\r\n    return text\r\n      .replace(/([a-z\\d])([A-Z])/g, '$1-$2')\r\n      .replace(/([A-Z]+)([A-Z][a-z\\d]+)/g, '$1-$2')\r\n      .toLowerCase()\r\n  }\r\n\r\n  createBadge = ({ measure, name, badge, tags }) => {\r\n    // console.log('1createBadge', name, badge, tags)\r\n    switch (name) {\r\n      case 'subscriber':\r\n        if (badge.versions[tags.badges.subscriber]) {\r\n          badge = badge.versions[tags.badges.subscriber]\r\n        } else {\r\n          badge = Object.keys(badge.versions)[0]\r\n        }\r\n        break\r\n\r\n      case 'bits':\r\n        if (badge.versions[tags.badges.bits]) {\r\n          badge = badge.versions[tags.badges.bits]\r\n        } else {\r\n          badge = Object.keys(badge.versions)[0]\r\n        }\r\n        break\r\n\r\n      default:\r\n        if (badge.versions['0']) badge = badge.versions['0']\r\n        else if (badge.versions['1']) badge = badge.versions['1']\r\n        else badge = Object.keys(badge.versions)[0]\r\n    }\r\n    // console.log('2createBadge', badge)\r\n    \r\n    try {\r\n      return <img\r\n        onLoad={measure}\r\n        key={name || ''}\r\n        title={badge.title || ''}\r\n        alt={badge.title || ''}\r\n        aria-label={badge.title || ''}\r\n        className='line_right'\r\n        src={badge.image_url_1x}\r\n        srcSet={`${badge.image_url_1x} 1x, ${badge.image_url_2x} 2x, ${badge.image_url_4x} 4x`}\r\n      ></img>\r\n    } catch (error) {\r\n      console.warn(error)\r\n      return <img\r\n        onLoad={measure}\r\n        key={name}\r\n        alt={name}\r\n        className='line_right'\r\n      ></img>\r\n    }\r\n  }\r\n\r\n  createBadgeTags = ({ source, measure }) => {\r\n    let badges = []\r\n    if (source && source.tags && source.tags.badges) {\r\n\r\n      for (let name in source.tags.badges) {\r\n        if (source.tags.badges.hasOwnProperty(name)) {\r\n          let element\r\n\r\n          // https://discuss.dev.twitch.tv/t/how-to-get-emotes-badges-object/18916/2\r\n          if (this.props.badges[source.chan] && this.props.badges[source.chan].has(name)) {\r\n            // console.log(`this.props.badges[${source.chan}].has(${name})`)\r\n            const badge = this.props.badges[source.chan].get(name)\r\n            element = this.createBadge({ measure, name, badge, tags: source.tags })\r\n          } else if (this.props.badges.global.has(name)) {\r\n            // console.log(`this.props.badges.global.has(${name})`)\r\n            const badge = this.props.badges.global.get(name)\r\n            element = this.createBadge({ measure, name, badge, tags: source.tags })\r\n          } else {\r\n            element = <span className='line_right badge badge-primary' key={name} title={name}>{name}</span>\r\n          }\r\n          badges.push(element)\r\n        }\r\n      }\r\n    }\r\n    \r\n    return badges\r\n  }\r\n\r\n  render() {\r\n    if (debug) console.log('LogContainer RENDER', this.props, '############################################')\r\n\r\n    let scrollButton = ''\r\n    if (!this.props.scrollBottom) { // TODO: nur wenn man auch scrollen kann\r\n      scrollButton = <Button variant='secondary' id='scrollDown' onClick={() => {\r\n        this.bindListRef.current.scrollToRow(this.props.length)\r\n        this.props.update(true, 'scrollBottom')\r\n        refreshCache()\r\n      }}>scroll down</Button>\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <div style={{\r\n          height: 'calc(100vh - 60px)',\r\n          fontSize: Number(this.props.settings.get('fontSize')),\r\n          fontFamily: `'${this.props.settings.get('fontClass')}', monospace`\r\n        }} className={'bg-dark text-list'}>\r\n\r\n          <AutoSizer>\r\n            {({ height, width }) => (\r\n\r\n              <List\r\n                id='list'\r\n                // height={window.innerHeight - 60}\r\n                // width={window.innerWidth - 3}\r\n                height={height}\r\n                width={width - 3}\r\n                overscanColumnCount={0}\r\n                overscanRowCount={10}\r\n                scrollingResetTimeInterval={0}\r\n                ref={this.bindListRef}\r\n                rowCount={this.props.length}\r\n                deferredMeasurementCache={cache}\r\n                onScroll={this.listenScrollEvent}\r\n                rowHeight={cache.rowHeight}\r\n                noRowsRenderer={() => <div><center><i>Nichts gefunden</i></center></div>}\r\n                rowRenderer={({ // https://github.com/bvaughn/react-virtualized/blob/8738097a6ead422f74590d6a631bd5fd83ebc831/docs/List.md#rowrenderer\r\n                  index,       // Index of row\r\n                  // isScrolling, // The List is currently being scrolled\r\n                  // isVisible,   // This row is visible within the List (eg it is not an overscanned row)\r\n                  _key,         // Unique key within array of rendered rows\r\n                  parent,      // Reference to the parent List (instance)\r\n                  style        // Style object to be applied to row (to position it);\r\n                  // This must be passed through to the rendered row element.\r\n                }) => {\r\n                  let key\r\n                  const source = this.props.logs.get(index) // This comes from your list data\r\n                  if (source.tags && source.tags.id) {\r\n                    key = source.tags.id\r\n                  } else {\r\n                    key = _key || index\r\n                  }\r\n\r\n                  const channelStyle = this.props.settings.get('channelColor') && this.props.settings.get('channelColor')[source.chan] ? { backgroundColor: this.props.settings.get('channelColor')[source.chan] } : {}\r\n                  const channel = <><span className='line_both badge badge-primary' style={channelStyle} onClick={() => this.updateFilter(source.chan, 'channel')}>{source.chan}</span></>\r\n\r\n                  return (\r\n                    <CellMeasurer // https://github.com/bvaughn/react-virtualized/blob/master/docs/CellMeasurer.md\r\n                      cache={cache}\r\n                      columnIndex={0}\r\n                      key={key}\r\n                      parent={parent}\r\n                      rowIndex={index}\r\n                    >\r\n                      {({ measure }) => (\r\n\r\n                        <div\r\n                          key={key}\r\n                          style={{\r\n                            ...style,\r\n                            padding: '.3rem', // '.5rem 2rem',\r\n                            wordWrap: 'break-word',\r\n                            lineHeight: '20px'\r\n                          }}\r\n                        >\r\n                          <span>{FormatDate(source.timestamp, this.state.mobile)}</span>:\r\n                          {channel}\r\n                          {(this.props.settings.get('twitchBadges') || this.props.settings.get('bttvBadges') ? this.createBadgeTags({ source, measure }) : '')}\r\n                          {this.UserNameRenderer(source)}\r\n                          <ChatLine\r\n                            source={source}\r\n                            emotes={this.props.emotes}\r\n                            twitchEmotes={this.props.settings.get('twitchEmotes')}\r\n                            bttvEmotes={this.props.settings.get('bttvEmotes')}\r\n                            ffzEmotes={this.props.settings.get('ffzEmotes')}\r\n                            measure={measure}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                    </CellMeasurer>\r\n                  )\r\n\r\n                }}\r\n              />\r\n\r\n            )}\r\n          </AutoSizer>\r\n\r\n          {scrollButton}\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    scrollBottom: state.scrollBottom,\r\n    logs: state.logs,\r\n    length: state.length,\r\n    filter: state.filter,\r\n    settings: state.settings,\r\n    badges: state.badges,\r\n    emotes: state.emotes\r\n  }), // mapStateToProps\r\n  { update } // mapDispatchToProps\r\n)(LogContainer)\r\n","import React, { PureComponent } from 'react'\n\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\n\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\n\nimport Collapse from 'react-bootstrap/Collapse'\n\nimport Form from 'react-bootstrap/Form'\nimport FormControl from 'react-bootstrap/FormControl'\nimport InputGroup from 'react-bootstrap/InputGroup'\nimport Alert from 'react-bootstrap/Alert'\n\nimport { connect } from 'react-redux'\nimport { update } from '../redux'\n\nconst debug = false\n\nclass SettingsModal extends PureComponent {\n  constructor (props, context) {\n    super(props, context)\n\n    this.handleShow = this.handleShow.bind(this)\n    this.handleClose = this.handleClose.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n\n    this.state = {\n      restart: false,\n      temp: '',\n      addChannel: ''\n    }\n  }\n\n  handleShow () {\n    this.props.update(true, 'modalShow')\n  }\n\n  handleClose () {\n    this.props.update(false, 'modalShow')\n  }\n\n  handleChange ({ target }) {\n    this.setState({ addChannel: target.value })\n  }\n\n  render () {\n    if (debug) console.log('SettingsContainer RENDER', this.props, '############################################')\n\n    const channelColor = []\n    this.props.channels.forEach((channel) => {\n      channelColor.push(\n        <InputGroup key={channel.name} className='mb-3'>\n          <InputGroup.Prepend>\n            <InputGroup.Text>{channel.name}</InputGroup.Text>\n          </InputGroup.Prepend>\n          <FormControl\n            key={channel.name}\n            type='color'\n            name={channel.name}\n            defaultValue={this.props.settings.get('channelColor')[channel.name]}\n            onChange={({ target }) => {\n              this.props.update({ [target.name]: target.value }, 'channelColor')\n            }}\n          />\n          <InputGroup.Append>\n            <Button\n              variant='outline-danger'\n              onClick={() => {\n                let channels = this.props.channels\n                const index = channels.indexOf(channel) // https://immutable-js.github.io/immutable-js/docs/#/List/indexOf\n                if (index > -1) {\n                  channels = channels.splice(index, 1) // https://immutable-js.github.io/immutable-js/docs/#/List/slice\n                }\n                this.props.update(channels, 'CHANNELS')\n              }}\n            >X</Button>\n          </InputGroup.Append>\n        </InputGroup>\n      )\n    })\n\n    return (\n      <>\n        <Button variant='outline-secondary' onClick={this.handleShow}>\n          <span role='img' aria-label='Gear'></span>\n        </Button>\n\n        <Modal\n          size='lg'\n          show={this.props.settings.get('modalShow')}\n          onHide={this.handleClose}\n          scrollable\n        >\n          <Modal.Header closeButton>\n            <Modal.Title>Einstellungen</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n\n            <Collapse in={this.state.restart}>\n              <div onClick={() => { window.location.reload() }}>\n                <Alert variant='danger'>\n                  Webseite Aktualisieren notwenig (F5)\n                </Alert>\n              </div>\n            </Collapse>\n\n            <Form.Group as={Row}>\n              <Form.Label column sm='1'>Font</Form.Label>\n\n              <Col sm='11'>\n                <Form.Control\n                  as='select'\n                  name='fontClass'\n                  value={this.props.settings.get('fontClass')}\n                  onChange={({ target }) => { this.props.update(target.value, 'fontClass') }}\n                >\n                  <option value='Arimo'>Arimo</option>\n                  <option value='Hind'>Hind</option>\n                  <option value='IBM Plex Sans'>IBM Plex Sans</option>\n                  <option value='Montserrat'>Montserrat</option>\n                  <option value='Muli'>Muli</option>\n                  <option value='Nunito Sans'>Nunito Sans</option>\n                  <option value='Gothic A1'>Gothic A1</option>\n                  <option value='Roboto'>Roboto</option>\n                  <option value='Rubik'>Rubik</option>\n                  <option value='Source Sans Pro'>Source Sans Pro</option>\n                  <option value='Poppins'>Poppins</option>\n                  <option value='Open Sans'>Open Sans</option>\n                  <option value='Work Sans'>Work Sans</option>\n                </Form.Control>\n              </Col>\n            </Form.Group>\n\n            <InputGroup className='mb-3'>\n              <InputGroup.Prepend>\n                <InputGroup.Text id='basic-addon1'>Font Size</InputGroup.Text>\n              </InputGroup.Prepend>\n\n              <FormControl\n                type='number'\n                placeholder='Font Size'\n                aria-label='Font Size'\n                name='fontSize'\n                onChange={({ target }) => { this.props.update(target.value, target.name) }}\n                defaultValue={this.props.settings.get('fontSize')}\n                min='6'\n                max='30'\n              />\n              <InputGroup.Append>\n                <InputGroup.Text>px</InputGroup.Text>\n              </InputGroup.Append>\n            </InputGroup>\n\n            <InputGroup className='mb-3'>\n              <InputGroup.Prepend>\n                <InputGroup.Text>Row Height</InputGroup.Text>\n              </InputGroup.Prepend>\n              <FormControl\n                type='number'\n                placeholder='Row Height'\n                aria-label='Row Height'\n                name='rowHeight'\n                onChange={({ target }) => {\n                  this.props.update(target.value, target.name)\n                  this.setState({ restart: true })\n                }}\n                defaultValue={this.props.settings.get('rowHeight')}\n                min='3'\n                max='60'\n              />\n              <InputGroup.Append>\n                <InputGroup.Text>px</InputGroup.Text>\n              </InputGroup.Append>\n            </InputGroup>\n\n            <InputGroup className='mb-3'>\n              <InputGroup.Prepend>\n                <InputGroup.Text>Max Lines</InputGroup.Text>\n              </InputGroup.Prepend>\n              <FormControl\n                type='number'\n                placeholder='Max Lines'\n                aria-label='Max Lines'\n                onChange={({ target }) => {\n                  this.props.update(target.value, target.name)\n                  this.setState({ restart: true })\n                }}\n                name='maxLines'\n                defaultValue={this.props.settings.get('maxLines')}\n                min='1'\n              />\n            </InputGroup>\n\n            <Form.Group as={Row}>\n              <Form.Label column md='3' lg>Zeige Badges von:</Form.Label>\n\n              <Col md='auto'>\n                <Form.Check\n                  inline\n                  custom\n                  type='switch'\n                  id='checkbox-twitchBadges'\n                  label='Twitch'\n                  name='twitchBadges'\n                  defaultChecked={this.props.settings.get('twitchBadges')}\n                  onChange={({ target }) => { this.props.update(target.checked, target.name) }}\n                />\n\n                <Form.Check\n                  inline\n                  custom\n                  type='switch'\n                  id='checkbox-bttvBadges'\n                  label='BTTV'\n                  name='bttvBadges'\n                  defaultChecked={this.props.settings.get('bttvBadges')}\n                  onChange={({ target }) => { this.props.update(target.checked, target.name) }}\n                />\n              </Col>\n            </Form.Group>\n\n            <Form.Group as={Row}>\n              <Form.Label column md='3' lg>Zeige Emotes von:</Form.Label>\n\n              <Col md='auto'>\n                <Form.Check\n                  inline\n                  custom\n                  type='switch'\n                  id='checkbox-twitchEmotes'\n                  label='Twitch'\n                  name='twitchEmotes'\n                  // defaultChecked={this.props.settings.get('showBadges')}\n                  defaultChecked={this.props.settings.get('twitchEmotes')}\n                  onChange={({ target }) => { this.props.update(target.checked, target.name) }}\n                />\n\n                <Form.Check\n                  inline\n                  custom\n                  type='switch'\n                  id='checkbox-bttvEmotes'\n                  label='BTTV'\n                  name='bttvEmotes'\n                  // defaultChecked={this.props.settings.get('bttvBadges')}\n                  defaultChecked={this.props.settings.get('bttvEmotes')}\n                  onChange={({ target }) => { this.props.update(target.checked, target.name) }}\n                />\n\n                <Form.Check\n                  inline\n                  custom\n                  type='switch'\n                  id='checkbox-ffzEmotes'\n                  label='FrankerFaceZ'\n                  name='ffzEmotes'\n                  // defaultChecked={this.props.settings.get('ffzBadges')}\n                  defaultChecked={this.props.settings.get('ffzEmotes')}\n                  onChange={({ target }) => { this.props.update(target.checked, target.name) }}\n                />\n              </Col>\n            </Form.Group>\n\n            {channelColor}\n\n            <InputGroup className='mb-3'>\n              <FormControl // https://reactjs.org/docs/forms.html#controlled-components\n                placeholder='add Channel'\n                aria-label='add Channel'\n                aria-describedby='basic-addon9'\n                // defaultValue={this.temp}\n                value={this.state.addChannel}\n                onChange={this.handleChange}\n                onKeyPress={event => {\n                  if (event.key === 'Enter') {\n                    this.props.update({ name: this.state.addChannel.toLowerCase(), roomId: undefined }, 'ADD_CHANNEL')\n                    this.setState({ addChannel: '' })\n                  }\n                }}\n              />\n              <InputGroup.Append>\n                <Button\n                  variant='outline-success'\n                  onClick={() => {\n                    this.props.update({ name: this.state.addChannel.toLowerCase(), roomId: undefined }, 'ADD_CHANNEL')\n                    this.setState({ addChannel: '' })\n                  }}\n                >Add</Button>\n              </InputGroup.Append>\n            </InputGroup>\n\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant='secondary' onClick={this.handleClose}>\n              Schliessen\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </>\n    )\n  }\n}\n\nexport default connect(\n  state => ({\n    settings: state.settings,\n    channels: state.channels\n  }), // mapStateToProps\n  { update } // mapDispatchToProps\n)(SettingsModal)\n","import React, { PureComponent } from 'react'\r\n\r\nimport Navbar from 'react-bootstrap/Navbar'\r\n\r\nimport Badge from 'react-bootstrap/Badge'\r\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar'\r\n\r\nimport Form from 'react-bootstrap/Form'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\n\r\n// import classifierLevel from '../helper/classifierLevel'\r\n// import classifierNumber from '../helper/classifierNumber'\r\n// import LevelColor from '../helper/colors'\r\n\r\nimport SettingsModal from './Settings'\r\nimport { addUrlProps, UrlQueryParamTypes, configureUrlQuery } from 'react-url-query' // https://github.com/pbeshai/react-url-query\r\n\r\nimport { createBrowserHistory } from 'history'\r\n\r\nimport { compose } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport { update } from '../redux'\r\n\r\nconst debug = false\r\n\r\nfunction debounce (fn, delay) {\r\n  let timer = null\r\n  return function () {\r\n    let context = this\r\n    let args = arguments\r\n    clearTimeout(timer)\r\n    timer = setTimeout(function () {\r\n      fn.apply(context, args)\r\n    }, delay)\r\n  }\r\n}\r\n\r\nconst history = createBrowserHistory()\r\n\r\nconfigureUrlQuery({\r\n  history,\r\n  addChangeHandlers: true\r\n})\r\n\r\nconst urlPropsQueryConfig = {\r\n  QueryChannel: { type: UrlQueryParamTypes.string, queryParam: 'channel' },\r\n  QueryName: { type: UrlQueryParamTypes.string, queryParam: 'name' },\r\n  QueryMsg: { type: UrlQueryParamTypes.string, queryParam: 'msg' }\r\n}\r\n\r\nclass TopBar extends PureComponent {\r\n  constructor (props) {\r\n    super(props)\r\n    if (debug) console.log('TopBar', props)\r\n\r\n    this.state = {}\r\n    this.timer = {}\r\n    this.updateFilter = this.updateFilter.bind(this)\r\n    // this.updateDebounceFilter = debounce(this.updateDebounceFilter, 150) // https://stackoverflow.com/a/48702173\r\n    this.updateDebounceFilter = debounce(this.updateFilter, 150) // https://stackoverflow.com/a/48702173\r\n\r\n    this.onWheelHandler = this.onWheelHandler.bind(this)\r\n    this.onTouchMoveHandler = this.onTouchMoveHandler.bind(this)\r\n    this.onTouchStartHandler = this.onTouchStartHandler.bind(this)\r\n  }\r\n\r\n  componentDidMount () {\r\n    if (this.props.QueryChannel) this.props.update(this.props.QueryChannel, 'ADD_FILTER_channel')\r\n    if (this.props.QueryName) this.props.update(this.props.QueryName, 'ADD_FILTER_name')\r\n    if (this.props.QueryMsg) this.props.update(this.props.QueryMsg, 'ADD_FILTER_msg')\r\n  }\r\n\r\n  updateFilter (userInput, type) {\r\n    // console.log(userInput, 'ADD_FILTER_' + type)\r\n    this.props.update(userInput, 'ADD_FILTER_' + type)\r\n    switch (type) {\r\n      case 'channel': this.props.onChangeQueryChannel(userInput); break\r\n      case 'name': this.props.onChangeQueryName(userInput); break\r\n      case 'msg': this.props.onChangeQueryMsg(userInput); break\r\n      default:\r\n    }\r\n  }\r\n\r\n  updateFilterNext (type, up) {\r\n    if (debug) console.log('updateFilterNext', { type, up })\r\n    switch (type) {\r\n      case 'channel':\r\n        const ChannelArray = Object.keys(this.props.settings.get('channelColor'))\r\n        console.log({ ChannelArray })\r\n\r\n        if (ChannelArray.length !== 1) {\r\n          const index = ChannelArray.indexOf(this.props.filter.get('channel'))\r\n          let nextIndex\r\n          if (up) {\r\n            nextIndex = index - 1\r\n            if (ChannelArray[nextIndex] === undefined) nextIndex = ChannelArray.length - 1\r\n          } else {\r\n            nextIndex = index + 1\r\n            if (ChannelArray[nextIndex] === undefined) nextIndex = 0\r\n          }\r\n          this.updateFilter(ChannelArray[nextIndex], type)\r\n        }\r\n        break\r\n\r\n      case 'name':\r\n        const AppArray = Object.keys(this.props.settings.get('appColor')) // TODO: das kommt direkt aus der Line\r\n        if (AppArray.length !== 1) {\r\n          const index = AppArray.indexOf(this.props.filter.get('name'))\r\n          let nextIndex\r\n          if (up) {\r\n            nextIndex = index - 1\r\n            if (AppArray[nextIndex] === undefined) nextIndex = AppArray.length - 1\r\n          } else {\r\n            nextIndex = index + 1\r\n            if (AppArray[nextIndex] === undefined) nextIndex = 0\r\n          }\r\n          this.updateFilter(AppArray[nextIndex], type)\r\n        }\r\n        break\r\n\r\n      default:\r\n        console.warn('updateFilterNext:', type)\r\n    }\r\n  }\r\n\r\n  onWheelHandler ({ deltaY }, type) {\r\n    let up\r\n    if (deltaY > 0) up = false\r\n    else up = true\r\n    this.updateFilterNext(type, up)\r\n  }\r\n\r\n  onTouchMoveHandler ({ touches }, type) {\r\n    if (!this.state.touchReset) {\r\n      const t = touches[0]\r\n      let up\r\n      if (t.pageY - this.state.touchY > 0) up = false\r\n      else up = true\r\n      this.setState({ touchReset: true })\r\n      this.updateFilterNext(type, up)\r\n    }\r\n  }\r\n\r\n  onTouchStartHandler ({ touches }) {\r\n    const t = touches[0]\r\n    this.setState({ touchY: t.pageY, touchReset: false })\r\n  }\r\n\r\n  render () {\r\n    if (debug) console.log('TopbarContainer RENDER', this.props, '############################################')\r\n\r\n    let channel = ''\r\n    if (this.props.filter.get('channel') !== '') {\r\n      const appStyle = this.props.settings.get('channelColor') && this.props.settings.get('channelColor')[this.props.filter.get('channel')] ? { backgroundColor: this.props.settings.get('channelColor')[this.props.filter.get('channel')] } : {}\r\n      channel = <Badge\r\n        variant='secondary'\r\n        ref='app'\r\n        style={{ ...appStyle, margin: '0 5px 5px', touchAction: 'pan-down' }}\r\n        onClick={() => this.updateFilter('', 'channel')}\r\n        onWheel={(e) => this.onWheelHandler(e, 'channel')}\r\n        onTouchMove={(e) => this.onTouchMoveHandler(e, 'channel')}\r\n        onTouchStart={this.onTouchStartHandler}\r\n      >{this.props.filter.get('channel')}</Badge>\r\n\r\n      this.props.onChangeQueryChannel(this.props.filter.get('channel'))\r\n    }\r\n\r\n    let name = ''\r\n    if (this.props.filter.get('name') !== '') {\r\n      const appStyle = this.props.settings.get('appColor') && this.props.settings.get('appColor')[this.props.filter.get('name')] ? { color: this.props.settings.get('appColor')[this.props.filter.get('name')] } : {}\r\n      name = <Badge\r\n        variant='secondary'\r\n        ref='app'\r\n        style={{ ...appStyle, margin: '0 5px 5px', touchAction: 'pan-down' }}\r\n        onClick={() => this.updateFilter('', 'name')}\r\n        onWheel={(e) => this.onWheelHandler(e, 'name')}\r\n        onTouchMove={(e) => this.onTouchMoveHandler(e, 'name')}\r\n        onTouchStart={this.onTouchStartHandler}\r\n      >{this.props.filter.get('name')}</Badge>\r\n\r\n      this.props.onChangeQueryName(this.props.filter.get('name'))\r\n    }\r\n\r\n    return (\r\n      <Navbar bg='dark' variant='dark' style={{ height: '60px' }} collapseOnSelect>\r\n        <Navbar.Brand>\r\n          <Navbar.Text className='d-lg-none'>\r\n            <img src={require('../TwitchGlitchWhite.svg')} alt='logo' width='30' height='30' className='d-inline-block align-top' />\r\n          </Navbar.Text>\r\n          <Navbar.Text className='d-none d-lg-block'>\r\n            <img src={require('../TwitchGlitchWhite.svg')} alt='logo' width='30' height='30' className='d-inline-block align-top' style={{ marginRight: '5px' }} />\r\n            TwitchChatViewer\r\n          </Navbar.Text>\r\n        </Navbar.Brand>\r\n\r\n        <Navbar.Text>\r\n          <span className='d-lg-none'>{this.props.length}</span>\r\n          <span className='d-none d-lg-block'>{this.props.length} lines</span>\r\n        </Navbar.Text>\r\n\r\n        <Navbar.Collapse className='justify-content-center'>\r\n          <Navbar.Text>\r\n            <ButtonToolbar>\r\n              {channel}\r\n              {name}\r\n            </ButtonToolbar>\r\n          </Navbar.Text>\r\n        </Navbar.Collapse>\r\n\r\n        <Navbar.Collapse className='justify-content-end'>\r\n          <Form\r\n            inline\r\n            onSubmit={e => {\r\n              e.preventDefault()\r\n              this.updateFilter(this.refs.search.value, 'msg')\r\n            }}\r\n          >\r\n\r\n            <Form.Group style={{ marginBottom: 0 }}>\r\n              <FormControl\r\n                style={{ width: '40vw' }}\r\n                type='text'\r\n                placeholder='Search'\r\n                className='btn-dark'\r\n                ref='search'\r\n                defaultValue={this.props.filter.get('msg')}\r\n                onChange={() => this.updateDebounceFilter(this.refs.search.value, 'msg')}\r\n              />\r\n            </Form.Group>\r\n\r\n          </Form>\r\n          <SettingsModal />\r\n        </Navbar.Collapse>\r\n\r\n      </Navbar>\r\n    )\r\n  }\r\n}\r\n\r\nconst enhance = compose(\r\n  connect(\r\n    state => ({\r\n      length: state.length,\r\n      filter: state.filter,\r\n      settings: state.settings\r\n    }), // mapStateToProps\r\n    { update } // mapDispatchToProps\r\n  ),\r\n  addUrlProps({ urlPropsQueryConfig })\r\n)\r\nexport default enhance(TopBar)\r\n","const generalBoolean = maybeBoolean => maybeBoolean === '1'\r\n// https://github.com/twitch-devs/twitch-js/blob/next/src/Chat/utils/parsers/tags.js\r\n\r\nexport default (raw) => {\r\n  return raw.split(';')[1].substr(7).split(',').reduce((parsed, badge) => {\r\n    if (badge === '') { return parsed }\r\n    const [rawKey, value] = badge.split('/')\r\n    // return { ...parsed, [rawKey]: value }\r\n\r\n    switch (rawKey) {\r\n      // Booleans\r\n      case 'admin':\r\n      case 'broadcaster':\r\n      case 'global-mod':\r\n      case 'moderator':\r\n      case 'partner':\r\n      case 'premium':\r\n      case 'staff':\r\n      case 'sub-gifter':\r\n      case 'turbo':\r\n      case 'vip':\r\n        return { ...parsed, [rawKey]: generalBoolean(value) }\r\n      // Numbers\r\n      case 'bits':\r\n      case 'bits-leader':\r\n      case 'subscriber':\r\n        return { ...parsed, [rawKey]: Number(value) }\r\n      default:\r\n        return { ...parsed, [rawKey]: value }\r\n    }\r\n  }, {})\r\n}\r\n","/* globals fetch:true */\r\n\r\nimport { connect } from 'react-redux'\r\nimport { update } from '../redux'\r\n\r\nimport difference from 'lodash.difference'\r\n\r\nlet tempChannels\r\n\r\nexport const _connect = ({ update, badges, emotes, channels }) => {\r\n  // console.log('badges_connect', badges, channels)\r\n\r\n  const StoreChannel = channels.toArray().filter(chan => chan.roomId) // filtere undefined roomId raus\r\n\r\n  const ChannelState = tempChannels\r\n  // console.log({ StoreChannel, ChannelState })\r\n\r\n  const _join = difference(StoreChannel, ChannelState)\r\n  if (_join.length) {\r\n    // console.log('badges_connectjoin', _join)\r\n  }\r\n\r\n  const _part = difference(ChannelState, StoreChannel)\r\n  if (_part.length) {\r\n    // console.log('badges_connectpart', _part)\r\n    // https://badges.twitch.tv/v1/badges/channels/gronkh/display\r\n  }\r\n\r\n  if (badges.global.size === 0) { // Badges\r\n    fetch('https://badges.twitch.tv/v1/badges/global/display') // Twitch\r\n      .then(res => {\r\n        if (res.status !== 200) throw new Error(res.status || res.statusText)\r\n        else return res.json()\r\n      })\r\n      .then(res => update({ key: 'global', value: res.badge_sets }, 'UPDATE_BADGES'))\r\n      .catch(err => {\r\n        if (err.message !== '404') {\r\n          console.warn(err.message)\r\n        }\r\n      })\r\n  }\r\n\r\n  if (emotes.global.size === 0) { // Emotes\r\n    fetch('https://api.betterttv.net/2/emotes') // BTTV\r\n      .then(res => {\r\n        if (res.status !== 200) throw new Error(res.status || res.statusText)\r\n        else return res.json()\r\n      })\r\n      .then(res => {\r\n        const emotes = {}\r\n        for (let i = 0, len = res.emotes.length; i < len; i++) {\r\n          emotes[res.emotes[i].code] = res.emotes[i]\r\n        }\r\n        update({ key: 'globalbttv', value: emotes }, 'UPDATE_EMOTES')\r\n      })\r\n      .catch(err => {\r\n        if (err.message !== '404') {\r\n          console.warn(err.message)\r\n        }\r\n      })\r\n\r\n    fetch('https://api.frankerfacez.com/v1/set/global') // FFZ\r\n      .then(res => {\r\n        if (res.status !== 200) throw new Error(res.status || res.statusText)\r\n        else return res.json()\r\n      })\r\n      .then(res => {\r\n        const resEmotes = res.sets[res.default_sets[0]].emoticons\r\n        const emotes = {}\r\n        for (let i = 0, len = resEmotes.length; i < len; i++) {\r\n          emotes[resEmotes[i].name] = resEmotes[i]\r\n        }\r\n        update({ key: 'globalffz', value: emotes }, 'UPDATE_EMOTES')\r\n      })\r\n      .catch(err => {\r\n        if (err.message !== '404') {\r\n          console.warn(err.message)\r\n        }\r\n      })\r\n  }\r\n\r\n  StoreChannel.forEach(value => {\r\n    if (!badges[value.name]) { // Badges\r\n      fetch(`https://badges.twitch.tv/v1/badges/channels/${value.roomId}/display`) // Twitch\r\n        .then(res => {\r\n          if (res.status !== 200) throw new Error(res.status || res.statusText)\r\n          else return res.json()\r\n        })\r\n        .then(res => {\r\n          update({ key: value.name, value: res.badge_sets }, 'UPDATE_BADGES')\r\n        })\r\n        .catch(err => {\r\n          if (err.message !== '404') {\r\n            console.warn(err.message)\r\n          }\r\n        })\r\n    }\r\n\r\n    if (!emotes[`${value.name}-bttv`]) { // Emotes\r\n      fetch(`https://api.betterttv.net/2/channels/${value.name}`) // BTTV\r\n        .then(res => {\r\n          if (res.status !== 200) throw new Error(res.status || res.statusText)\r\n          else return res.json()\r\n        })\r\n        .then(res => {\r\n          const emotes = {}\r\n          for (let i = 0, len = res.emotes.length; i < len; i++) {\r\n            emotes[res.emotes[i].code] = res.emotes[i]\r\n          }\r\n          update({ key: `${value.name}-bttv`, value: emotes }, 'UPDATE_EMOTES')\r\n        })\r\n        .catch(err => {\r\n          if (err.message !== '404') {\r\n            console.warn(err.message)\r\n          }\r\n        })\r\n    }\r\n\r\n    if (!emotes[`${value.name}-ffz`]) { // Emotes\r\n      fetch(`https://api.frankerfacez.com/v1/room/id/${value.roomId}`) // FFZ\r\n        .then(res => {\r\n          if (res.status !== 200) throw new Error(res.status || res.statusText)\r\n          else return res.json()\r\n        })\r\n        .then(res => {\r\n          if (res.room && res.room.set) {\r\n            if (res.sets[res.room.set] && res.sets[res.room.set].emoticons && res.sets[res.room.set].emoticons.length !== 0) { // das Array knnte auch leer sein\r\n              const resEmotes = res.sets[res.room.set].emoticons\r\n              const emotes = {}\r\n              for (let i = 0, len = resEmotes.length; i < len; i++) {\r\n                emotes[resEmotes[i].name] = resEmotes[i]\r\n              }\r\n              update({ key: `${value.name}-ffz`, value: emotes }, 'UPDATE_EMOTES')\r\n            }\r\n          }\r\n        })\r\n        .catch(err => {\r\n          if (err.message !== '404') {\r\n            console.warn(err.message)\r\n          }\r\n        })\r\n    }\r\n  })\r\n\r\n  tempChannels = StoreChannel\r\n  return null\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    channels: state.channels,\r\n    badges: state.badges,\r\n    emotes: state.emotes\r\n  }), // mapStateToProps\r\n  { update } // mapDispatchToProps\r\n)(_connect)\r\n","// import protobuf from 'protobufjs' // https://www.npmjs.com/package/protobufjs\r\n\r\nimport { connect } from 'react-redux'\r\nimport { update } from '../redux'\r\n\r\n// import getRandomColor from '../helper/getRandomColor'\r\nimport parseBadges from '../helper/parseBadges'\r\n\r\nimport difference from 'lodash.difference'\r\n\r\nimport TwitchJs from 'twitch-js'\r\n\r\n// const formatEmotes = (text, emotes) => {\r\n//   if (emotes === []) return text\r\n//   text = text.split('')\r\n//   for (let i = 0, len = emotes.length; i < len; i++) {\r\n//     // A cookie associated with a cross-site resource at https://jtvnw.net/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application>Storage>Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.\r\n//     text.splice(emotes[i].start, emotes[i].end, '<img class=\"emoticon\" src=\"//static-cdn.jtvnw.net/emoticons/v1/' + emotes[i].id + '/1.0\">')\r\n//   }\r\n//   return text.join('')\r\n// }\r\n\r\nconst { chat } = new TwitchJs({ token: '', username: `justinfan${Math.floor((Math.random() * 80000) + 1000)}`, chat: { joinTimeout: 60000 }, log: { level: 0 } })\r\n\r\n// // eslint-disable-next-line no-control-regex\r\n// const ACTION = /(\\x01ACTION )(.*)(\\x01)/\r\n\r\nexport const _disconnect = () => {\r\n  chat.disconnect()\r\n}\r\n\r\nconst connected = () => chat._readyState === 3\r\n\r\nexport const _connect = ({ update, channels }) => {\r\n  // console.log('_readyState', chat._readyState)\r\n  // console.log(channels.toArray())\r\n  if (connected()) { // https://github.com/twitch-devs/twitch-js/blob/083d8626c8fdfb19ff147a59f60d487b712be06c/src/Chat/index.js\r\n    const StoreChannel = channels.toArray().map(chan => chan.name)\r\n    const ChannelState = Object.keys(chat._channelState).map(chan => chan.substr(1))\r\n\r\n    const _joins = difference(StoreChannel, ChannelState)\r\n    if (_joins.length) {\r\n      for (const _join of _joins) {\r\n        chat.join(_join).then(data => {\r\n          update({ name: _join, roomId: data.roomState.roomId }, 'ADD_ROOMID')\r\n          update([{ timestamp: +new Date(), chan: _join, msg: '=> JOIN' }], 'ADD_DATA')\r\n        })\r\n      }\r\n    }\r\n\r\n    const _parts = difference(ChannelState, StoreChannel)\r\n    if (_parts.length) {\r\n      // console.log('part', _parts)\r\n      for (const _part of _parts) {\r\n        chat.join(_part).then(() => {\r\n          update([{ timestamp: +new Date(), chan: _part, msg: '<= LEAVE' }], 'ADD_DATA')\r\n        })\r\n      }\r\n    }\r\n  } else if (chat._readyState === 0) {\r\n    chat.connect()\r\n      .then(async () => {\r\n        // console.log('Connect ...')\r\n        // await Promise.all(channels.toArray().map(channel => chat.join(channel.name))).then(data => console.log(data))\r\n        channels.toArray().map(channel => chat.join(channel.name).then(_ => update([{ timestamp: +new Date(), chan: channel.name, msg: '=> JOIN' }], 'ADD_DATA')))\r\n      })\r\n      .catch(err => {\r\n        console.warn(err)\r\n      })\r\n\r\n    chat.on('*', ({ channel, command, message, tags, timestamp, username, _raw }) => {\r\n      timestamp = timestamp || +new Date()\r\n      const chan = channel && channel.substr(1)\r\n      const name = username\r\n      // let msg\r\n      switch (command) {\r\n        case 'PRIVMSG':\r\n          // console.log(_raw)\r\n          // msg = formatEmotes(message, tags.emotes)\r\n          // msg = message\r\n          // if (tags.color === null) {\r\n          //   tags.color = getRandomColor()\r\n          // }\r\n          // if (msg.toLowerCase().indexOf('@' + chan) !== -1) {\r\n          //   tags.attention = true\r\n          // }\r\n          // const found = ACTION.exec(msg)\r\n          // if (found !== null) {\r\n          //   msg = found[2]\r\n          //   tags.action = true\r\n          // }\r\n\r\n          if (tags && tags.badges) {\r\n            if (tags.badges !== {}) {\r\n              // delete tags.badges\r\n              tags.badges_ = tags.badges\r\n              tags.badges = parseBadges(_raw)\r\n            }\r\n          }\r\n\r\n          update([{ timestamp, chan, name, msg: message, tags, raw: _raw }], 'ADD_DATA')\r\n          break\r\n\r\n        case 'USERNOTICE':\r\n          update([{ timestamp, chan, msg: tags.systemMsg }], 'ADD_DATA')\r\n          break\r\n\r\n        case 'CLEARMSG': // https://dev.twitch.tv/docs/irc/tags#clearmsg-twitch-tags\r\n          // Single message removal on a channel. This is triggered via /delete <target-msg-id> on IRC.\r\n          // console.log('CLEARMSG', { channel, msg, tags, timestamp, username })\r\n          tags = {\r\n            ...tags,\r\n            banReason: true,\r\n            banMsg: '[CLEARMSG]'\r\n          }\r\n          // update([{ timestamp, chan, msg: `REMOVE ${username}, ${tags.targetMsgId}` }], 'ADD_DATA')\r\n          update({ timestamp, chan, username, tags }, 'REMOVE_DATA')\r\n          break\r\n\r\n        case 'CLEARCHAT': // https://dev.twitch.tv/docs/irc/tags#clearchat-twitch-tags\r\n          // Temporary or permanent ban on a channel.\r\n          if (tags.banDuration) { // ban-duration (Optional) Duration of the timeout, in seconds. If omitted, the ban is permanent.\r\n            tags.banMsg = `[TIMEOUT, ${tags.banDuration + 's' + (tags.banReason ? ', ' + tags.banReason : '')}]`\r\n          } else {\r\n            tags.banMsg = `[BAN, banReason: ${tags.banReason}]`\r\n          }\r\n          // update([{ timestamp, chan, username: 'twitch.tv', msg: tags.banMsg }], 'ADD_DATA')\r\n          update({ timestamp, chan, username, tags }, 'EDIT_DATA')\r\n          break\r\n\r\n        case 'JOIN':\r\n        //   update([{ timestamp, chan: '-', msg: '=> JOIN' }], 'ADD_DATA')\r\n          break\r\n\r\n        case 'PART':\r\n        //   update([{ timestamp, chan: '-', msg: '<= PART' }], 'ADD_DATA')\r\n          break\r\n\r\n        case 'CONNECTED':\r\n          update([{ timestamp, chan: 'twitch.tv', msg: 'CONNECTED' }], 'ADD_DATA')\r\n          break\r\n\r\n        case 'NOT_READY':\r\n          update([{ timestamp, chan: 'twitch.tv', msg: 'TODO: NOT_READY' }], 'ADD_DATA')\r\n          break\r\n\r\n        case 'CONNECTING':\r\n          update([{ timestamp, chan: 'twitch.tv', msg: 'TODO: CONNECTING' }], 'ADD_DATA')\r\n          break\r\n\r\n        case 'RECONNECTING':\r\n          update([{ timestamp, chan: 'twitch.tv', msg: 'TODO: RECONNECTING' }], 'ADD_DATA')\r\n          break\r\n\r\n        case 'DISCONNECTING':\r\n          update([{ timestamp, chan: 'twitch.tv', msg: 'TODO: DISCONNECTING' }], 'ADD_DATA')\r\n          break\r\n\r\n        case 'DISCONNECTED':\r\n          update([{ timestamp, chan: 'twitch.tv', msg: 'TODO: DISCONNECTED' }], 'ADD_DATA')\r\n          break\r\n\r\n          // \"HOSTTARGET\"\r\n          // { channel: \"#tsm_viss\", command: \"HOSTTARGET\", message: undefined, tags: {  }, timestamp: Sat Nov 02 2019 00: 00: 23 GMT + 0100(Mitteleuropische Normalzeit),  }\r\n          // channel: \"#tsm_viss\"\r\n          // command: \"HOSTTARGET\"\r\n          // message: undefined\r\n          // tags: { }\r\n          // timestamp: Sat Nov 02 2019 00: 00: 23 GMT + 0100(Mitteleuropische Normalzeit) { }\r\n          // username: \"halifax\"\r\n\r\n        case 'NOTICE':\r\n          update([{ timestamp, chan: channel, msg: message }], 'ADD_DATA')\r\n          // { channel: \"#tsm_viss\", command: \"NOTICE\", message: \"Now hosting Halifax.\", tags: {  }, timestamp: Sat Nov 02 2019 00: 00: 23 GMT + 0100(Mitteleuropische Normalzeit),  }\r\n          // channel: \"#tsm_viss\"\r\n          // command: \"NOTICE\"\r\n          // message: \"Now hosting Halifax.\"\r\n          // tags: { msgId: \"host_on\" }\r\n          // timestamp: Sat Nov 02 2019 00: 00: 23 GMT + 0100(Mitteleuropische Normalzeit) { }\r\n          // username: \"tmi.twitch.tv\"\r\n\r\n          // { channel: \"#eosandy\", command: \"NOTICE\", message: \"Now hosting Shurjoka.\", tags: {  }, timestamp: Tue Nov 05 2019 17: 15: 04 GMT + 0100(Mitteleuropische Normalzeit),  }\r\n          // channel: \"#eosandy\"\r\n          // command: \"NOTICE\"\r\n          // message: \"Now hosting Shurjoka.\"\r\n          // tags: { msgId: \"host_on\" }\r\n          // timestamp: Tue Nov 05 2019 17: 15: 04 GMT + 0100(Mitteleuropische Normalzeit) { }\r\n          // username: \"tmi.twitch.tv\"\r\n          // __proto__: Object\r\n          console.log('NOTICE', { channel, command, message, tags, timestamp, username })\r\n          break\r\n\r\n        case '001': ; break\r\n        case '002': ; break\r\n        case '003': ; break\r\n        case '004': ; break\r\n        case '353': ; break\r\n        case '366': ; break\r\n        case '372': ; break\r\n        case '375': ; break\r\n        case '376': ; break\r\n        case 'CAP': ; break\r\n        case 'MODE': ; break\r\n        case 'PING': ; break\r\n        case 'ROOMSTATE': ; break\r\n\r\n        case 'PARSE_ERROR_ENCOUNTERED': ; break\r\n\r\n        default:\r\n          console.log('default', { channel, command, message, tags, timestamp, username })\r\n      }\r\n    })\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    channels: state.channels\r\n  }), // mapStateToProps\r\n  // state => ({ settings: state.settings }), // mapStateToProps\r\n  // state => ({ }), // mapStateToProps\r\n  { update } // mapDispatchToProps\r\n)(_connect)\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Log from './components/Log'\nimport TopBar from './components/TopBar'\n// import * as serviceWorker from './serviceWorker'\n\nimport DataService from './data/twitch'\nimport BadgesService from './data/badges'\nimport { Provider } from 'react-redux'\nimport { store } from './redux'\n\nReactDOM.render(\n  <Provider store={store}>\n    <TopBar />\n    <Log />\n    <DataService />\n    <BadgesService />\n  </Provider>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\n// serviceWorker.unregister()\n// serviceWorker.register()\n"],"sourceRoot":""}